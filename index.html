<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="CW-Dilettant - Lerne Morsen/Telegrafie">
    <meta name="theme-color" content="#1976D2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CW-Dilettant">

    <title>CW-Dilettant</title>

    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- App Container -->
    <div id="app" class="app">

        <!-- App Bar -->
        <header class="app-bar">
            <button class="icon-button" id="menuBtn" aria-label="Menü öffnen">
                <span class="material-icons">menu</span>
            </button>
            <h1 class="app-bar-title">CW-Dilettant</h1>
            <button class="icon-button active" id="gebenToneToggle" title="Ton ein/aus" style="display: none;">
                <span class="material-icons">volume_up</span>
            </button>
        </header>

        <!-- Navigation Drawer (Hamburger Menu) -->
        <aside class="nav-drawer" id="navDrawer">
            <div class="nav-drawer-header">
                <span class="nav-drawer-title">CW-Dilettant</span>
                <span class="nav-drawer-subtitle">Morse lernen</span>
            </div>
            <nav class="nav-drawer-content">
                <ul class="nav-list">
                    <li>
                        <a href="#home" class="nav-item active" data-page="home">
                            <span class="material-icons">home</span>
                            <span>Start</span>
                        </a>
                    </li>
                    <li>
                        <a href="#hoeren" class="nav-item" data-page="hoeren">
                            <span class="material-icons">headphones</span>
                            <span>Hören</span>
                        </a>
                    </li>
                    <li>
                        <a href="#erkennen" class="nav-item" data-page="erkennen">
                            <span class="material-icons">quiz</span>
                            <span>Erkennen</span>
                        </a>
                    </li>
                    <li>
                        <a href="#geben" class="nav-item" data-page="geben">
                            <span class="material-icons">keyboard</span>
                            <span>Geben</span>
                        </a>
                    </li>
                </ul>
                <div class="nav-divider"></div>
                <ul class="nav-list">
                    <li>
                        <a href="#einstellungen" class="nav-item" data-page="einstellungen">
                            <span class="material-icons">settings</span>
                            <span>Einstellungen</span>
                        </a>
                    </li>
                    <li>
                        <a href="#hilfe" class="nav-item" data-page="hilfe">
                            <span class="material-icons">help</span>
                            <span>Hilfe</span>
                        </a>
                    </li>
                    <li>
                        <a href="#ueber" class="nav-item" data-page="ueber">
                            <span class="material-icons">info</span>
                            <span>Über</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- Overlay for drawer -->
        <div class="nav-overlay" id="navOverlay"></div>

        <!-- Main Content -->
        <main class="main-content" id="mainContent">

            <!-- Home Page -->
            <section class="page active" id="page-home">
                <div class="page-content">
                    <!-- Quick Actions (oben) -->
                    <div class="action-buttons">
                        <button class="action-card" data-navigate="hoeren">
                            <div class="action-icon-wrapper action-icon-hoeren">
                                <span class="material-icons">headphones</span>
                            </div>
                            <span class="action-title">Hören</span>
                            <span class="action-desc">Morse-Zeichen hören und lernen</span>
                        </button>
                        <button class="action-card" data-navigate="erkennen">
                            <div class="action-icon-wrapper action-icon-erkennen">
                                <span class="material-icons">quiz</span>
                            </div>
                            <span class="action-title">Erkennen</span>
                            <span class="action-desc">Gehörtes identifizieren</span>
                        </button>
                        <button class="action-card" data-navigate="geben">
                            <div class="action-icon-wrapper action-icon-geben">
                                <span class="material-icons">keyboard</span>
                            </div>
                            <span class="action-title">Geben</span>
                            <span class="action-desc">Selbst morsen üben</span>
                        </button>
                    </div>

                    <!-- Statistik (unten) -->
                    <div class="stats-section">
                        <!-- Streak & Fortschritt Header -->
                        <div class="stats-header">
                            <div class="stat-streak" id="statStreakContainer">
                                <span class="material-icons streak-icon">local_fire_department</span>
                                <span class="streak-value" id="statStreak">0</span>
                                <span class="streak-label">Tage</span>
                            </div>
                            <div class="stat-progress">
                                <div class="progress-label">
                                    <span>Koch-Methode</span>
                                    <span id="statKochProgress">1/40</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="statKochProgressBar" style="width: 2.5%"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Hauptstatistiken als kompakte Zeile -->
                        <div class="stats-row">
                            <div class="stat-compact">
                                <span class="stat-compact-value" id="statSessions">0</span>
                                <span class="stat-compact-label">Übungen</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-compact">
                                <span class="stat-compact-value" id="statCorrect">0%</span>
                                <span class="stat-compact-label">Richtig</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-compact">
                                <span class="stat-compact-value" id="statChars">0</span>
                                <span class="stat-compact-label">Zeichen</span>
                            </div>
                            <div class="stat-divider"></div>
                            <div class="stat-compact">
                                <span class="stat-compact-value" id="statTime">0m</span>
                                <span class="stat-compact-label">Zeit</span>
                            </div>
                        </div>

                        <!-- Mini-Chart (letzte 7 Tage) -->
                        <div class="stats-chart" id="statsChartContainer">
                            <div class="chart-header">
                                <span class="chart-label">Aktivität</span>
                                <span class="chart-period">Letzte 7 Tage</span>
                            </div>
                            <div class="mini-chart" id="miniChart">
                                <div class="chart-bar" data-day="0"><div class="bar-fill"></div><span class="bar-label">Mo</span></div>
                                <div class="chart-bar" data-day="1"><div class="bar-fill"></div><span class="bar-label">Di</span></div>
                                <div class="chart-bar" data-day="2"><div class="bar-fill"></div><span class="bar-label">Mi</span></div>
                                <div class="chart-bar" data-day="3"><div class="bar-fill"></div><span class="bar-label">Do</span></div>
                                <div class="chart-bar" data-day="4"><div class="bar-fill"></div><span class="bar-label">Fr</span></div>
                                <div class="chart-bar" data-day="5"><div class="bar-fill"></div><span class="bar-label">Sa</span></div>
                                <div class="chart-bar" data-day="6"><div class="bar-fill"></div><span class="bar-label">So</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Hören Page -->
            <section class="page" id="page-hoeren">
                <div class="page-content">
                    <!-- Lektionsnavigation -->
                    <div class="lesson-nav">
                        <button class="lesson-nav-btn" id="prevLesson" aria-label="Vorherige Lektion">
                            <span class="material-icons">chevron_left</span>
                        </button>
                        <div class="lesson-info">
                            <span class="lesson-number" id="lessonNumber">Lektion 1</span>
                            <span class="lesson-chars" id="lessonChars">K, M</span>
                        </div>
                        <button class="lesson-nav-btn" id="nextLesson" aria-label="Nächste Lektion">
                            <span class="material-icons">chevron_right</span>
                        </button>
                    </div>

                    <!-- Aktuelles Zeichen Display -->
                    <div class="char-display" id="charDisplay">
                        <div class="char-letter" id="charLetter">-</div>
                        <div class="char-morse" id="charMorse"></div>
                        <div class="char-phonetic" id="charPhonetic"></div>
                    </div>

                    <!-- Phase & Progress -->
                    <div class="phase-info">
                        <span class="phase-label" id="phaseLabel">Bereit</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span class="progress-text" id="progressText"></span>
                    </div>

                    <!-- Gruppen-Anzeige -->
                    <div class="group-display" id="groupDisplay">
                        <div class="group-chars" id="groupChars"></div>
                    </div>

                    <!-- Steuerung -->
                    <div class="controls">
                        <button class="btn btn-primary btn-large" id="btnStart">
                            <span class="material-icons">play_arrow</span>
                            <span>Start</span>
                        </button>
                        <button class="btn btn-secondary btn-large" id="btnStop" disabled>
                            <span class="material-icons">stop</span>
                            <span>Stop</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Erkennen Page -->
            <section class="page" id="page-erkennen">
                <div class="page-content">
                    <!-- Modus-Auswahl -->
                    <div class="mode-selector">
                        <button class="mode-btn active" id="erkModeKeyboard" data-mode="keyboard">
                            <span class="material-icons">keyboard</span>
                            <span>Tastatur</span>
                        </button>
                        <button class="mode-btn" id="erkModePaper" data-mode="paper">
                            <span class="material-icons">edit_note</span>
                            <span>Papier</span>
                        </button>
                    </div>

                    <!-- Lektionsnavigation -->
                    <div class="lesson-nav">
                        <button class="lesson-nav-btn" id="erkPrevLesson" aria-label="Vorherige Lektion">
                            <span class="material-icons">chevron_left</span>
                        </button>
                        <div class="lesson-info">
                            <span class="lesson-number" id="erkLessonNumber">Lektion 1</span>
                            <span class="lesson-chars" id="erkLessonChars">K, M</span>
                        </div>
                        <button class="lesson-nav-btn" id="erkNextLesson" aria-label="Nächste Lektion">
                            <span class="material-icons">chevron_right</span>
                        </button>
                    </div>

                    <!-- Phase & Progress -->
                    <div class="phase-info">
                        <span class="phase-label" id="erkPhaseLabel">Bereit</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="erkProgressFill"></div>
                        </div>
                        <span class="progress-text" id="erkProgressText"></span>
                    </div>

                    <!-- Tastatur-Modus: Eingabefeld -->
                    <div class="erk-keyboard-view" id="erkKeyboardView">
                        <div class="erk-input-container">
                            <input type="text"
                                   class="erk-input"
                                   id="erkInput"
                                   placeholder="Gehörtes eingeben..."
                                   autocomplete="off"
                                   autocapitalize="characters"
                                   spellcheck="false">
                            <div class="input-feedback" id="erkInputFeedback"></div>
                        </div>
                    </div>

                    <!-- Papier-Modus: Lösung & Fehler -->
                    <div class="erk-paper-view hidden" id="erkPaperView">
                        <!-- Lösung anzeigen -->
                        <div class="solution-card" id="erkSolutionCard">
                            <div class="solution-header">
                                <h3>Lösung</h3>
                                <button class="btn btn-icon-small" id="erkSpeakSolution" title="Lösung ansagen">
                                    <span class="material-icons">volume_up</span>
                                </button>
                            </div>
                            <div class="solution-list" id="erkSolutionList"></div>
                        </div>

                        <!-- Fehler eingeben -->
                        <div class="error-card" id="erkErrorCard">
                            <h3>Auswertung</h3>
                            <p class="error-hint">Vergleiche mit deinen Notizen und zähle die Fehler:</p>
                            <div class="error-input-row">
                                <button class="btn btn-icon" id="erkErrorMinus">
                                    <span class="material-icons">remove</span>
                                </button>
                                <div class="error-display">
                                    <span class="error-count" id="erkErrorCount">0</span>
                                    <span class="error-label">Fehler</span>
                                </div>
                                <button class="btn btn-icon" id="erkErrorPlus">
                                    <span class="material-icons">add</span>
                                </button>
                            </div>
                            <div class="error-stats" id="erkErrorStats"></div>
                            <button class="btn btn-primary btn-wide" id="erkSaveErrors">
                                <span class="material-icons">check</span>
                                <span>Auswertung speichern</span>
                            </button>
                        </div>

                        <!-- Ergebnis -->
                        <div class="result-card hidden" id="erkResultCard">
                            <div class="result-icon">
                                <span class="material-icons" id="erkResultIcon">emoji_events</span>
                            </div>
                            <div class="result-percent" id="erkResultPercent">0%</div>
                            <div class="result-text" id="erkResultText">richtig</div>
                            <button class="btn btn-primary" id="erkNewRound">
                                <span class="material-icons">replay</span>
                                <span>Neue Runde</span>
                            </button>
                        </div>
                    </div>

                    <!-- Steuerung -->
                    <div class="controls">
                        <button class="btn btn-primary btn-large" id="erkBtnStart">
                            <span class="material-icons">play_arrow</span>
                            <span>Start</span>
                        </button>
                        <button class="btn btn-secondary btn-large" id="erkBtnStop" disabled>
                            <span class="material-icons">stop</span>
                            <span>Stop</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Geben Page -->
            <section class="page" id="page-geben">
                <div class="page-content">
                    <!-- Aktuelle Eingabe -->
                    <div class="geben-display">
                        <div class="geben-scope-container" id="gebenScopeContainer">
                            <canvas class="geben-scope" id="gebenScope"></canvas>
                        </div>
                        <div class="geben-sequence" id="gebenSequence"></div>
                        <div class="geben-char" id="gebenChar">-</div>
                    </div>

                    <!-- Eingegebener Text -->
                    <div class="geben-output">
                        <div class="geben-output-label">Eingegebener Text:</div>
                        <div class="geben-output-text" id="gebenOutput"></div>
                        <button class="btn btn-outline" id="gebenClear">
                            <span class="material-icons">backspace</span>
                            <span>Löschen</span>
                        </button>
                    </div>

                    <!-- Touch-Morsetaste -->
                    <button class="geben-touch-key" id="gebenTouchKey">
                        <span class="material-icons">radio_button_checked</span>
                        <span>Morsetaste</span>
                    </button>
                </div>
            </section>

            <!-- Einstellungen Page -->
            <section class="page" id="page-einstellungen">
                <div class="page-content">
                    <!-- Tabs -->
                    <div class="tabs">
                        <button class="tab active" data-tab="tab-allgemein">Allgemein</button>
                        <button class="tab" data-tab="tab-cw">CW</button>
                        <button class="tab" data-tab="tab-hoeren">Hören</button>
                        <button class="tab" data-tab="tab-erkennen">Erkennen</button>
                        <button class="tab" data-tab="tab-geben">Geben</button>
                    </div>

                    <!-- Tab: Allgemein -->
                    <div class="tab-content active" id="tab-allgemein">
                        <div class="settings-group">
                            <h3 class="settings-title">Erscheinungsbild</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Dunkles Design</span>
                                    <span class="setting-desc">Aktiviert das dunkle Farbschema</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingDarkMode">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Sprache</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Buchstabiertafel</span>
                                    <span class="setting-desc">Für gesprochene Zeichen</span>
                                </div>
                                <select class="select" id="settingPhoneticLang">
                                    <option value="en">Englisch (NATO)</option>
                                    <option value="de">Deutsch</option>
                                </select>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Zeichen ansagen</span>
                                    <span class="setting-desc">Zeichen vor dem Morse-Ton aussprechen</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingAnnounce" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Daten</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Statistik löschen</span>
                                    <span class="setting-desc">Setzt alle Statistikdaten zurück</span>
                                </div>
                                <button class="btn btn-outline btn-danger" id="btnResetStats">Löschen</button>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Einstellungen zurücksetzen</span>
                                    <span class="setting-desc">Setzt alle Einstellungen auf Standard</span>
                                </div>
                                <button class="btn btn-outline btn-danger" id="btnResetSettings">Zurücksetzen</button>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Cache löschen</span>
                                    <span class="setting-desc">Löscht den Offline-Cache und lädt neu</span>
                                </div>
                                <button class="btn btn-outline btn-danger" id="btnClearCache">Cache löschen</button>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: CW-Parameter -->
                    <div class="tab-content" id="tab-cw">
                        <div class="settings-group">
                            <h3 class="settings-title">Geschwindigkeit</h3>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Geschwindigkeit (WPM)</span>
                                    <span class="setting-value" id="wpmValue">12</span>
                                </div>
                                <input type="range" class="slider-range" id="settingWpm" min="5" max="40" value="12">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Effektiv-Geschwindigkeit (WPM)</span>
                                    <span class="setting-value" id="effWpmValue">12</span>
                                </div>
                                <input type="range" class="slider-range" id="settingEffWpm" min="5" max="12" value="12">
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Ton</h3>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Tonhöhe (Hz)</span>
                                    <span class="setting-value" id="freqValue">600</span>
                                </div>
                                <input type="range" class="slider-range" id="settingFreq" min="400" max="1000" step="50" value="600">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Tonhöhen-Offset (Hz)</span>
                                    <span class="setting-value" id="pitchOffsetValue">0</span>
                                </div>
                                <input type="range" class="slider-range" id="settingPitchOffset" min="0" max="20" step="1" value="0">
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Zeichensatz</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Buchstaben</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingLetters" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Zahlen</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingNumbers" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Sonderzeichen</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingSpecial">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Hören -->
                    <div class="tab-content" id="tab-hoeren">
                        <div class="settings-group">
                            <h3 class="settings-title">Wiederholungen</h3>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Mit Pause</span>
                                    <span class="setting-value" id="repsWithPauseValue">3</span>
                                </div>
                                <input type="range" class="slider-range" id="settingRepsWithPause" min="0" max="10" value="3">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Ohne Pause</span>
                                    <span class="setting-value" id="repsNoPauseValue">3</span>
                                </div>
                                <input type="range" class="slider-range" id="settingRepsNoPause" min="0" max="10" value="3">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Pause zwischen Wdh. (ms)</span>
                                    <span class="setting-value" id="pauseBetweenValue">800</span>
                                </div>
                                <input type="range" class="slider-range" id="settingPauseBetween" min="300" max="2000" step="100" value="800">
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Übungsgruppen</h3>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Gruppengröße</span>
                                    <span class="setting-value" id="groupSizeValue">5</span>
                                </div>
                                <input type="range" class="slider-range" id="settingGroupSize" min="3" max="7" value="5">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Anzahl Gruppen</span>
                                    <span class="setting-value" id="numGroupsValue">10</span>
                                </div>
                                <input type="range" class="slider-range" id="settingNumGroups" min="5" max="50" step="5" value="10">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Pause nach Gruppe (s)</span>
                                    <span class="setting-value" id="pauseAfterGroupValue">2.5</span>
                                </div>
                                <input type="range" class="slider-range" id="settingPauseAfterGroup" min="1000" max="10000" step="500" value="2500">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Gewichtung neues Zeichen (%)</span>
                                    <span class="setting-value" id="newCharWeightValue">40</span>
                                </div>
                                <input type="range" class="slider-range" id="settingNewCharWeight" min="20" max="60" step="5" value="40">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Wiederholung letzte Lektionen</span>
                                    <span class="setting-value" id="reviewLessonsValue">6</span>
                                </div>
                                <input type="range" class="slider-range" id="settingReviewLessons" min="0" max="40" value="6">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Zusätzliche Zeichenpause (Faktor)</span>
                                    <span class="setting-value" id="charPauseFactorValue">0</span>
                                </div>
                                <input type="range" class="slider-range" id="settingCharPauseFactor" min="0" max="5" step="0.5" value="0">
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Modus</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Endlos-Modus</span>
                                    <span class="setting-desc">Lektion wiederholt sich automatisch</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingEndless">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Gruppen ansagen</span>
                                    <span class="setting-desc">"Gruppe 1", "Gruppe 2", ...</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingAnnounceGroups">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Dit/Dah ansagen</span>
                                    <span class="setting-desc">Morse-Elemente bei Zeichenvorstellung</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingAnnounceDitDah">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Erkennen -->
                    <div class="tab-content" id="tab-erkennen">
                        <div class="settings-group">
                            <h3 class="settings-title">Übungsgruppen</h3>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Gruppengröße</span>
                                    <span class="setting-value" id="erkGroupSizeValue">5</span>
                                </div>
                                <input type="range" class="slider-range" id="settingErkGroupSize" min="3" max="7" value="5">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Anzahl Gruppen</span>
                                    <span class="setting-value" id="erkNumGroupsValue">10</span>
                                </div>
                                <input type="range" class="slider-range" id="settingErkNumGroups" min="5" max="20" value="10">
                            </div>

                            <div class="setting-item vertical">
                                <div class="setting-info">
                                    <span class="setting-label">Pause nach Gruppe (s)</span>
                                    <span class="setting-value" id="erkPauseAfterGroupValue">2.5</span>
                                </div>
                                <input type="range" class="slider-range" id="settingErkPauseAfterGroup" min="1000" max="10000" step="500" value="2500">
                            </div>
                        </div>

                        <div class="settings-group">
                            <h3 class="settings-title">Tastatur-Modus</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Sofort-Feedback</span>
                                    <span class="setting-desc">Zeigt Ergebnis nach jeder Gruppe</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingErkInstantFeedback" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Tab: Geben -->
                    <div class="tab-content" id="tab-geben">
                        <div class="settings-group">
                            <h3 class="settings-title">Anzeige</h3>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Oszilloskop anzeigen</span>
                                    <span class="setting-desc">Zeigt die Signalform beim Geben</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingGebenShowScope" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div class="setting-item">
                                <div class="setting-info">
                                    <span class="setting-label">Morse-Sequenz anzeigen</span>
                                    <span class="setting-desc">Zeigt die Punkte und Striche über dem erkannten Buchstaben</span>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" id="settingGebenShowSequence">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Hilfe Page -->
            <section class="page" id="page-hilfe">
                <div class="page-content">
                    <div class="help-content">

                        <!-- Einführung -->
                        <div class="card">
                            <div class="card-content">
                                <h2>Willkommen bei CW-Dilettant</h2>
                                <p>Diese App hilft Ihnen beim Erlernen der Morse-Telegrafie (CW - Continuous Wave) nach der bewährten <strong>Koch-Methode</strong>. Die App ist als Progressive Web App (PWA) konzipiert und funktioniert vollständig offline.</p>
                            </div>
                        </div>

                        <!-- Koch-Methode -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">school</span> Die Koch-Methode</h3>
                                <p>Die Koch-Methode ist eine effektive Lernmethode für Morse-Telegrafie:</p>
                                <ul>
                                    <li><strong>Zeichen mit voller Geschwindigkeit:</strong> Von Anfang an werden Zeichen mit der Zielgeschwindigkeit (z.B. 12 WPM) gegeben</li>
                                    <li><strong>Schrittweiser Aufbau:</strong> Es beginnt mit nur 2 Zeichen (K und M), dann kommt schrittweise je ein neues Zeichen hinzu</li>
                                    <li><strong>40 Lektionen:</strong> Insgesamt 40 Lektionen führen Sie durch alle Buchstaben, Zahlen und Sonderzeichen</li>
                                    <li><strong>Farnsworth-Methode:</strong> Längere Pausen zwischen Zeichen erleichtern das Lernen, ohne die Zeichen selbst zu verlangsamen</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Module -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">apps</span> Die Module</h3>

                                <h4><span class="material-icons">headphones</span> Hören</h4>
                                <p>Das Hauptlernmodul nach der Koch-Methode:</p>
                                <ul>
                                    <li><strong>Phase 1 - Einführung:</strong> Neue Zeichen werden vorgestellt und mehrfach wiederholt</li>
                                    <li><strong>Phase 2 - Wiederholung:</strong> Bereits bekannte Zeichen aus den letzten Lektionen werden aufgefrischt</li>
                                    <li><strong>Phase 3 - Übungsgruppen:</strong> Zufällige Zeichengruppen zum Hören und Mitschreiben</li>
                                </ul>
                                <p><strong>Tipp:</strong> Nutzen Sie Papier und Stift, um die gehörten Zeichen mitzuschreiben!</p>

                                <h4><span class="material-icons">quiz</span> Erkennen</h4>
                                <p>Prüfen Sie Ihr Wissen mit zwei Modi:</p>
                                <ul>
                                    <li><strong>Tastatur-Modus:</strong> Tippen Sie die gehörten Zeichen ein und erhalten Sie sofort Feedback</li>
                                    <li><strong>Papier-Modus:</strong> Schreiben Sie die Zeichen auf Papier und geben Sie am Ende die Fehleranzahl ein</li>
                                </ul>

                                <h4><span class="material-icons">keyboard</span> Geben</h4>
                                <p>Üben Sie das Morsen selbst:</p>
                                <ul>
                                    <li>Nutzen Sie die <strong>Leertaste</strong> (Desktop) oder den <strong>Touch-Button</strong> (Mobil)</li>
                                    <li>Kurz drücken = Dit (Punkt), lang drücken = Dah (Strich)</li>
                                    <li>Das <strong>Oszilloskop</strong> zeigt Ihr Signal visuell an</li>
                                    <li>Erkannte Zeichen erscheinen automatisch</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Einstellungen -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">settings</span> Einstellungen im Detail</h3>

                                <h4>Tab: Allgemein</h4>
                                <ul>
                                    <li><strong>Dark Mode:</strong> Dunkles Design für angenehmes Lernen bei wenig Licht</li>
                                </ul>

                                <h4>Tab: CW-Parameter</h4>
                                <ul>
                                    <li><strong>Geschwindigkeit (WPM):</strong> 5-40 Words per Minute - die Geschwindigkeit der Morsezeichen selbst (Standard: 12 WPM)</li>
                                    <li><strong>Effektiv-Geschwindigkeit (WPM):</strong> Farnsworth-Methode - die Zeichen werden mit normaler WPM gegeben, aber die Pausen zwischen Zeichen und Wörtern sind länger. Muss ≤ normale WPM sein.</li>
                                    <li><strong>Tonhöhe (Hz):</strong> 400-1000 Hz - die Grundfrequenz des Morse-Tons (Standard: 600 Hz)</li>
                                    <li><strong>Tonhöhen-Offset (Hz):</strong> 0-20 Hz - Dit wird um diesen Wert höher, Dah tiefer abgespielt. Erleichtert die Unterscheidung (Standard: 0 Hz = keine Differenz)</li>
                                    <li><strong>Zeichensatz:</strong> Wählen Sie, welche Zeichen in Übungen vorkommen (betrifft nur Module außerhalb der Koch-Methode)</li>
                                </ul>

                                <h4>Tab: Hören</h4>
                                <p><strong>Wiederholungen:</strong></p>
                                <ul>
                                    <li><strong>Mit Pause:</strong> 0-10 - Neue Zeichen werden mit langen Pausen dazwischen wiederholt (Standard: 3)</li>
                                    <li><strong>Ohne Pause:</strong> 0-10 - Neue Zeichen werden ohne Pause direkt hintereinander gegeben (Standard: 3)</li>
                                    <li><strong>Pause zwischen Wdh.:</strong> 300-2000 ms - Länge der Pause bei "Mit Pause"</li>
                                    <li><em>Bei 0:</em> Das neue Zeichen wird nur 1x abgespielt</li>
                                </ul>
                                <p><strong>Übungsgruppen:</strong></p>
                                <ul>
                                    <li><strong>Gruppengröße:</strong> 3-7 Zeichen pro Gruppe (Standard: 5)</li>
                                    <li><strong>Anzahl Gruppen:</strong> 5-50 Gruppen pro Durchgang (Standard: 10)</li>
                                    <li><strong>Pause nach Gruppe:</strong> 1-10 Sekunden zum Mitschreiben</li>
                                    <li><strong>Gewichtung neues Zeichen:</strong> 20-60% - wie oft das neue Zeichen in Gruppen vorkommt (Standard: 40%)</li>
                                    <li><strong>Wiederholung letzte Lektionen:</strong> 0-40 - aus wie vielen vorherigen Lektionen Zeichen wiederholt werden (Standard: 6)
                                        <ul>
                                            <li><em>Bei 0:</em> Nur das neue Zeichen wird geübt</li>
                                            <li><em>Bei 6:</em> Zeichen aus den letzten 6 Lektionen kommen vor</li>
                                        </ul>
                                    </li>
                                    <li><strong>Zusätzliche Zeichenpause:</strong> 0-5 (Faktor) - verlängert die Pausen zwischen Zeichen in Gruppen</li>
                                </ul>
                                <p><strong>Weitere Optionen:</strong></p>
                                <ul>
                                    <li><strong>Endlos-Modus:</strong> Wiederholt die Lektion automatisch nach Abschluss</li>
                                    <li><strong>Zeichen ansagen:</strong> Buchstabiert neue Zeichen phonetisch (NATO/Deutsch)</li>
                                    <li><strong>Dit/Dah ansagen:</strong> Spricht die Morse-Sequenz aus ("ditt-daah" für A)</li>
                                    <li><strong>Gruppen ansagen:</strong> Sagt Gruppennummer vor jeder Gruppe an</li>
                                </ul>

                                <h4>Tab: Erkennen</h4>
                                <ul>
                                    <li><strong>Gruppengröße:</strong> 3-7 Zeichen (Standard: 5)</li>
                                    <li><strong>Anzahl Gruppen:</strong> 5-20 Gruppen (Standard: 10)</li>
                                    <li><strong>Pause nach Gruppe:</strong> 1-10 Sekunden</li>
                                    <li><strong>Sofort-Feedback:</strong> Im Tastatur-Modus zeigt sofort richtig/falsch an</li>
                                </ul>

                                <h4>Tab: Geben</h4>
                                <ul>
                                    <li><strong>Oszilloskop anzeigen:</strong> Zeigt Ihr Morse-Signal als Rechteckwelle</li>
                                    <li><strong>Morse-Sequenz anzeigen:</strong> Zeigt Punkte und Striche über dem erkannten Zeichen</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Tipps -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">tips_and_updates</span> Lerntipps</h3>
                                <ul>
                                    <li><strong>Regelmäßigkeit:</strong> Täglich 15-30 Minuten üben ist effektiver als selten lange Sessions</li>
                                    <li><strong>Geduld:</strong> Bleiben Sie bei einer Lektion, bis Sie 90% Trefferquote erreichen</li>
                                    <li><strong>Nicht raten:</strong> Hören Sie auf den Klang, nicht auf einzelne Dits und Dahs</li>
                                    <li><strong>Kopfhörer:</strong> Nutzen Sie Kopfhörer für bessere Konzentration</li>
                                    <li><strong>Farnsworth:</strong> Starten Sie mit niedriger Effektiv-WPM (z.B. 8) und steigern Sie diese langsam</li>
                                    <li><strong>Pausen machen:</strong> Bei Ermüdung lieber aufhören und am nächsten Tag weitermachen</li>
                                </ul>
                            </div>
                        </div>

                        <!-- PWA -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">install_mobile</span> Installation als App</h3>
                                <p>Diese App kann auf Ihrem Gerät installiert werden:</p>
                                <ul>
                                    <li><strong>Android/Chrome:</strong> Menü → "Zum Startbildschirm hinzufügen"</li>
                                    <li><strong>iOS/Safari:</strong> Teilen-Button → "Zum Home-Bildschirm"</li>
                                    <li><strong>Desktop:</strong> Chrome/Edge zeigen ein Installations-Icon in der Adressleiste</li>
                                </ul>
                                <p>Nach Installation funktioniert die App vollständig offline und startet wie eine native App!</p>
                            </div>
                        </div>

                        <!-- Statistik -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">analytics</span> Statistiken</h3>
                                <p>Die Startseite zeigt Ihre Lernfortschritte:</p>
                                <ul>
                                    <li><strong>Übungssessions:</strong> Anzahl Ihrer Lerneinheiten</li>
                                    <li><strong>Trefferquote:</strong> Durchschnittliche Erfolgsrate im Erkennen-Modul</li>
                                    <li><strong>Gesamtzeichen:</strong> Anzahl erkannter Zeichen</li>
                                    <li><strong>Übungszeit:</strong> Gesamte Zeit in Lern-Sessions</li>
                                </ul>
                                <p><em>Hinweis:</em> Die Statistik kann in den Einstellungen zurückgesetzt werden.</p>
                            </div>
                        </div>

                        <!-- Support -->
                        <div class="card">
                            <div class="card-content">
                                <h3><span class="material-icons">help_outline</span> Fragen & Probleme</h3>
                                <p>Bei Fragen oder technischen Problemen:</p>
                                <ul>
                                    <li>E-Mail: <a href="mailto:info@cseifert.de" class="link">info@cseifert.de</a></li>
                                    <li>Website: <a href="https://www.ohrenbeisser.de" target="_blank" rel="noopener" class="link">www.ohrenbeisser.de</a></li>
                                </ul>
                                <p><strong>73 & DX!</strong> (Beste Grüße & gute Verbindungen)</p>
                            </div>
                        </div>

                    </div>
                </div>
            </section>

            <!-- Über Page -->
            <section class="page" id="page-ueber">
                <div class="page-content">
                    <div class="about-content">
                        <div class="about-header">
                            <img src="icons/icon-128.png" alt="CW-Dilettant Logo" class="about-logo">
                            <h2>CW-Dilettant</h2>
                            <p class="version">Version 1.0.0</p>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <h3>Autor</h3>
                                <p><strong>Chris Seifert</strong> (DL6LG)</p>
                                <p>
                                    <a href="mailto:info@cseifert.de" class="link">
                                        <span class="material-icons">email</span>
                                        info@cseifert.de
                                    </a>
                                </p>
                                <p>
                                    <a href="https://www.ohrenbeisser.de" target="_blank" rel="noopener" class="link">
                                        <span class="material-icons">language</span>
                                        www.ohrenbeisser.de
                                    </a>
                                </p>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-content">
                                <h3>Lizenz & Quellcode</h3>
                                <p>Diese App ist Open Source unter der <strong>MIT-Lizenz</strong>.</p>
                                <p>
                                    <a href="https://github.com/ohrenbeisser" target="_blank" rel="noopener" class="link">
                                        <span class="material-icons">code</span>
                                        github.com/ohrenbeisser
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Scripts -->
    <!-- Bestätigungsdialog -->
    <div class="dialog-overlay" id="confirmDialog">
        <div class="dialog">
            <div class="dialog-header">
                <h3 class="dialog-title" id="dialogTitle">Bestätigung</h3>
            </div>
            <div class="dialog-content">
                <p id="dialogMessage">Möchten Sie fortfahren?</p>
            </div>
            <div class="dialog-actions">
                <button class="btn btn-text" id="dialogCancel">Abbrechen</button>
                <button class="btn btn-primary" id="dialogConfirm">Bestätigen</button>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/phonetic.js"></script>
    <script src="js/morse.js"></script>
    <script src="js/speaker.js"></script>
    <script src="js/koch.js"></script>
    <script src="js/erkennen.js"></script>
    <script src="js/geben.js"></script>
    <script src="js/scope.js"></script>
    <script src="js/router.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
